<ss-navbar></ss-navbar>

<div class="container">
  <div class="share-row">
    <nz-input-group nzSearch [nzAddOnAfter]="suffixButton">
      <input type="text" nz-input readonly [value]="shareLink"/>
    </nz-input-group>
    <button nz-button nzType="primary">
      <nz-icon nzType="plus-square" nzTheme="outline"/>
      Add To Share
    </button>
    <ng-template #suffixButton>
      <button nz-button nzType="primary" nzSearch (click)="copyShareLink()">
        <nz-icon nzType="link" nzTheme="outline"/>
        Copy Share Link
      </button>
    </ng-template>
  </div>

  <div class="main">
    <div class="sidebar">
      <ng-container *ngFor="let item of items">
        <ss-share-item-card
          [item]="item"
          [selected]="item === selectedItem"
          (click)="select(item)">
        </ss-share-item-card>
      </ng-container>
    </div>
    <div class="content">
      <ng-container *ngIf="!selectedItem">
        <div class="empty">
          <div>
            ðŸ‘‹ Nothing selected yet!
          </div>
          <div>
            Click an item from the list to see details here.
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="selectedItem">
        <div class="item-actions">
          <button *ngIf="isSelectedItemAFile()" nz-button nzType="dashed" nzSize="default" nzShape="circle"
                  (click)="downloadFIle()">
            <nz-icon nzType="download"/>
          </button>
          <button *ngIf="!isDocument()" nz-button nzType="dashed" nzSize="default" nzShape="circle"
                  (click)="copyToClipboard()">
            <nz-icon nzType="copy" nzTheme="twotone" nzTwotoneColor="#52c41a"/>
          </button>
          <button nz-button nzType="dashed" nzSize="default" nzShape="circle"
                  nz-popconfirm nzPopconfirmPlacement="bottomRight"
                  nzPopconfirmTitle="Are you sure you want to delete this item?" (nzOnConfirm)="deleteItem()">
            <nz-icon nzType="delete" nzTheme="twotone" nzTwotoneColor="#ff4d4f"/>
          </button>
        </div>
        <div class="item-content">
          <div class="file-display">
            <ng-container *ngIf="isLink()">
              <div class="link-content">
                <div class="link-icon">
                  <img class="icon" src="/icons/hyperlink.png"/>
                </div>
                <div class="link-info">
                  <a target="_blank" href="{{ selectedItem.url }}">{{ selectedItem.url }} </a>
                  <div class="warning">
                    If clicked, this link will open in a new tab. Exercise caution when visiting links
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="isText()">
              <p class="text-content">
                {{ selectedItem.content }}
              </p>
            </ng-container>
            <ng-container *ngIf="isDocument()">
              <div class="file-header">
                <div class="file-icon">{{ selectedItem.metadata.extension }}</div>
                <div class="file-main-info">
                  <h3>{{ selectedItem.metadata.name }}</h3>
                  <div class="file-subinfo">
                    <span>{{ selectedItem.metadata.sizeInBytes | filesize }}</span>
                    <span>â€¢</span>
                    <span>{{ selectedItem.metadata.mimeType }}</span>
                    <span>â€¢</span>
                    <span>Uploaded {{ selectedItem.createdAt | date:'mediumDate' }}</span>
                  </div>
                </div>
              </div>

              <div class="file-details">
                <div class="detail-group">
                  <div class="detail-item">
                    <span class="label">File ID</span>
                    <span class="value">{{ selectedItem.id }}</span>
                  </div>
                  <div class="detail-item" *ngIf="selectedItem.source">
                    <span class="label">Source</span>
                    <span class="value">{{ selectedItem.source }}</span>
                  </div>
                </div>

                <div class="detail-group">
                  <div class="detail-item">
                    <span class="label">Last Updated</span>
                    <span class="value">{{ selectedItem.updatedAt | date:'mediumDate' }}</span>
                  </div>
                  <div class="detail-item" *ngIf="selectedItem.appVersion">
                    <span class="label">App Version</span>
                    <span class="value">{{ selectedItem.appVersion }}</span>
                  </div>
                </div>

                <div class="detail-group">
                  <div class="detail-item" *ngIf="selectedItem.metadata.checksum">
                    <span class="label">Checksum</span>
                    <span class="value">{{ selectedItem.metadata.checksum }}</span>
                  </div>
                  <div class="detail-item" *ngIf="selectedItem.deviceName">
                    <span class="label">Device</span>
                    <span class="value">{{ selectedItem.deviceName }}</span>
                  </div>
                </div>
              </div>
            </ng-container>
            <ng-container *ngIf="isImage()">
              <div class="file-header">
                <div class="file-icon">{{ selectedItem.metadata.extension }}</div>
                <div class="file-main-info">
                  <h3>{{ selectedItem.metadata.name }}</h3>
                  <div class="file-subinfo">
                    <span>{{ selectedItem.metadata.sizeInBytes | filesize }}</span>
                    <span>â€¢</span>
                    <span>{{ selectedItem.metadata.mimeType }}</span>
                    <span>â€¢</span>
                    <span>Uploaded {{ selectedItem.createdAt | date:'mediumDate' }}</span>
                  </div>
                </div>
              </div>

              <div class="file-details">
                <div class="detail-group">
                  <div class="detail-item">
                    <img #sharedImage [src]="selectedItem.url" crossorigin="anonymous"/>
                  </div>
                </div>

                <div class="detail-group">
                  <div class="detail-item">
                    <span class="label">File ID</span>
                    <span class="value">{{ selectedItem.id }}</span>
                  </div>
                  <div class="detail-item" *ngIf="selectedItem.metadata.checksum">
                    <span class="label">Checksum</span>
                    <span class="value">{{ selectedItem.metadata.checksum }}</span>
                  </div>
                  <div class="detail-item" *ngIf="selectedItem.source">
                    <span class="label">Source</span>
                    <span class="value">{{ selectedItem.source }}</span>
                  </div>
                </div>

                <div class="detail-group">
                  <div class="detail-item">
                    <span class="label">Last Updated</span>
                    <span class="value">{{ selectedItem.updatedAt | date:'mediumDate' }}</span>
                  </div>
                  <div class="detail-item" *ngIf="selectedItem.appVersion">
                    <span class="label">App Version</span>
                    <span class="value">{{ selectedItem.appVersion }}</span>
                  </div>
                  <div class="detail-item" *ngIf="selectedItem.deviceName">
                    <span class="label">Device</span>
                    <span class="value">{{ selectedItem.deviceName }}</span>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
